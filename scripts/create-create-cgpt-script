#!/bin/bash

echo "Create a bash script called 'create-cgpt-script' that does the following:

1. Accept two inputs:
   - The name of the script to create (required)
   - A description of the script's functionality (optional)

2. Use cgpt to generate a prompt for creating the requested script. This prompt should:
   - Clearly describe the purpose and functionality of the script based on the inputs
   - Request that the script be written in bash
   - Ask for the script to be clean, concise, and compliant with shellcheck

3. Use cgpt again with the generated prompt to create the actual script

4. Write the generated script to a file with the provided name

5. Make the new script executable

6. Include cgpt usage information in the generated script when appropriate, using the following command to get the usage info:
   cgpt -h 2>&1

7. Handle errors gracefully, such as missing required input or issues with cgpt execution

8. Provide helpful usage information if run without arguments

Here's an example of how the script should be used:
./create-cgpt-script git-auto-commit 'a program to automatically format a git commit from what is currently staged'

Ensure the script is efficient, well-commented, and follows best practices for bash scripting." | cgpt -s "You are an expert bash programmer with deep knowledge of cgpt and script generation. Create a bash script that meets the described requirements. The script should be clean, concise, and follow shellcheck guidelines. Include helpful comments to explain the script's functionality." -m "claude-3-5-sonnet-20240620" -t 2000 -T 0.7 > create-cgpt-script

chmod +x create-cgpt-script
echo "create-cgpt-script has been created and made executable."